# 데이터베이스 시스템

> 1. 데이터베이스 시스템의 구성 요소
> 2. 3단계 데이터베이스 구조 및 사상

> 데이터 언어: 데이터베이스를 정의하고 이를 접근하기 위한 언어
> 데이터베이스 관리자: 조직의 여러 요구를 만족시키기 위해 일관성 있는 데이터베이스 스키마를 생성하고 유지하는 사람 또는 조직
> 3단계 데이터베이스 구조: 관점에 따라 외부 / 개념 / 내부


### 데이터베이스 시스템 구성요소

#### DB
> 조직체의 여러 응용 시스템들이 공유해서 사용하기 위해 구조적으로 통합된 운영 데이터의 모임
> 시스템 카탈로그(=데이터 사전)와 저장된 데이터베이스로 구분
> 시스템 카탈로그(system catalog)는 저장된 데이터베이스의 스키마 정보를 유지

#### DBMS
> 사용자의 요구에 따라 데이터베이스에 대한 모든 연산을 수행
> 사용자의 접근 요구를 접수 / 분석
> 시스템이 이해할 수 있는 형태로 요구를 변환
> 외부 / 개념 / 내부 / 저장 구조 간의 사상을 수행
> 저장 데이터베이스에 대한 연산을 실행

> 구성요소
> DDL 컴파일러: DDL을 내부 형태로 변환하여 카탈로그에 저장
> 질의어 처리기: 질의문을 파싱, 분석, 컴파일하여 목적 코드 생성
> 예비 컴파일러: 응용프로그램의 DML을 추출하고 그 자리에 Procedure call로 대체
> DML 컴파일러
> 런타임 데이터베이스 처리기: 런타임에 DB에 접근하여 데이터베이스 연산 수행
> 트랜잭션 관리자: 무결성과 권한 제어, 병행 제어와 회복 작업
> 저장 데이터 관리자

> 위치
> Application(User) - Tools - DBMS - OS - HW

#### 데이터 언어
> 데이터베이스를 정의하고 이를 접근하기 위한 언어
> DBMS와의 통신 수단
> 기능과 사용 목적으로 구분
> 	데이터 정의어:DDL
> 	데이터 조작어:DML
> 	데이터 제어어:DCL

> DDL
> 데이터베이스 스키마를 정의하거나 수정
> 데이터 정의어로 명시된 문장이 입력되면 DBMS는 사용자가 정의한 스키마에 대한 명세를 시스템 카탈로그 또는 데이터 사전에 저장
> 	데이터 모델에서 지원하는 데이터 구조 생성
> 	데이터 구조 변경
> 	데이터 구조 삭제
> 	데이터 접근을 위해 특정 애트리뷰트 위에 인덱스 정의

> DML
> 사용자가 원하는 데이터를 DBMS가 처리할 수 있도록 명세하는 도구
> 데이터베이스 내의 데이터를 검색, 수정, 삽입, 삭제
> 데이터 처리를 명세하는 방법에 따라
> 	절차적(procedural) DML: 어떤 데이터(what data)가 필요하고 어떻게 (how) 접근할 것인가 명세
> 	비절차적(non-procedural) DML: 어떤 데이터(what data)가 필요한지만 명세(ex: SQL)
> 	

>DCL
>데이터를 제어하는 내부적인 규정이나 기법을 정의하고 이를 이용하여 데이터를 제어하고 기술하는 언어
>데이터 제어어는 주로 데이터 관리목적으로 데이터베이스 관리자가 사용
>	데이터 보안
>	무결성
>	회복
>	병행 수행

#### 사용자
> 데이터베이스 관리자(설계자, 오퍼레이터), 응용프로그래머, 캐주얼 사용자(초보 사용자)

> 데이터베이스 관리자(DBA: Database Administrator)
> 조직의 여러 요구를 만족시키기 위해 일관성 있는 데이터베이스 스키마를 생성하고 유지하는 사람이나 조직
> DDL, DCL 사용

> 데이터베이스 스키마의 생성과 변경
> 무결성 제약조건을 명시
> 사용자의 권한을 허용하거나 취소하고, 사용자 역할 관리
> 저장 구조와 접근 방법(물리적 스키마) 정의
> 백업, 회복
> 표준화 시행
> 행정관리 및 불평 해결
> 시스템 감시 및 성능 분석


> 응용 프로그래머(Application Programmer)
> 데이터베이스 위에서 특정 응용이나 인터페이스를 구현하는 사람
> 고급 프로그래밍 언어 등으로 응용 프로그램을 개발하며 데이터 베이스 접근(내포된 데이터 조작어 사용)
> 응용프로그램을 최종 사용자들이 반복해서 수행하므로 기작성 트랜잭션이라 부름(canned transaction)

> 최종 사용자(End User)
> 질의하거나 갱신하거나 보고서 생성 등을 위해 DB를 사용하는 사람
> 최종 사용자는 DB를 직접 다루는 캐주얼 사용자와 응용으로만 접근하는 초보 사용자로 분류

> 데이터베이서 설계자(Database Designer)
> ERWin 등의 CASE(Computer-Aided Software Engineering) 도구들을 이용하여 데이터베이스 설계를 책임지는 사람
> 데이터베이스의 일관성을 유지하기 위해 정규화 수행
> 데이터베이스를 효율적으로 접근할 수 있도록 인덱스 등을 정의

#### 데이터베이스 컴퓨터
> 데이터베이스 기능을 수행하기 위한 전용 목적의 HW
> backend processor
> 지능형 저장 장치
> 내용식(associative) 메모리
> 병렬처리(parallel processing)

> 요청 <-> 호스트 컴퓨터 <-> DB 컴퓨터 <-> 저장 데이터베이스

##### 하둡
> 대규모 데이터 세트를 저장하고 처리하기 위한 오픈소스 소프트웨어 플랫폼으로 주로 대규모 데이터 처리에 사용됨

주요 특징
> 분산처리, 확장성, 내결함성, 고성능, 저비용

주요 구성 요소
> HDFS(Hadoop Distributed File System)
> 	데이터를 저장하는 분산 파일 시스템, 노드들에 분산하여 저장
> MapReduce
> 	데이터를 처리하는 프로그래밍 모델(Map: 처리, Reduce: 집계)
> YARN(Yet Another Resource Negotiator)
> 	자원 관리 및 잡 스케줄링 담당, 클러스터의 자원을 효율적으로 관리하고 작업 할당
> Hadoop Common
> 	하둡 시스템을 지원하는 공통 유틸리티와 라이브러리 모음

사용사례
> 대규모 데이터 처리, 빅데이터 분석

#하둡, #Hadoop


#### 데이터베이스 시스템의 요구사항
- 데이터의 독립성
- 효율적인 데이터 접근
- 데이터에 대한 동시 접근
- 백업과 회복
- 중복을 줄이거나 제어하며 일관성 유지
- 데이터 무결성: 데이터가 정확하고 완전(의미적인 측면)
- 데이터 보안
- 쉬운 질의어
- 다양한 사용자 인터페이스


# 3단계 데이터베이스 구조

> 1978년에 ANSI/SPARC에서 제안된 아키텍처
> 현재 대부분의 상용 DBMS 구현에 사용됨
#### 보는 관점에 따라
> 외부 단계(External Level): 각 사용자의 뷰
> 개념 단계(Conceptual Level): 사용자의 뷰가 통합된 기관 전체의 뷰
> 내부 단계(Internal Level): 물리적 저장장치의 입장에서의 뷰

## 데이터베이스 독립성
#### 외부 단계
> 일반적으로 최종 사용자와 응용 프로그래머들은 DB의 일부분에만 관심

#### 개념 단계
> 전체 데이터베이스의 논리적인 구조를 기술
> 조직체 전체에 대한 스키마를 표현
> DB에 저장된 데이터의 형태, 데이터 간의 관계, 그리고 무결성 제약조건들을 기술
> DB마다 오직 한 개의 개념 스키마 존재
> 저장 구조와 독립적

#### 내부 단계
> 실제 데이터들의 물리적인 구조에 대한 스키마
> DB에 어떤 데이터가 어떻게 저장되어 있는가 기술
> 인덱스, 해싱 등과 같은 접근 경로, 데이터 압축 등을 기술
> DBMS의 지시에 따라 OS가 관리

#### 스키마(Schema)
> 데이터베이스의 논리적 구조
> 데이터구조와 제약조건에 대한 명세를 기술

> 3단계 스키마 구조
> 외부 스키마(sub schema): 개별 사용자의 입장에서 DB 구조를 기술
> 개념 스키마: 조직 전체의 입장에서 DB를 기술한 것
> 내부 스키마: 저장된 입장에서 전체 DB가 저장되는 방법을 기술한 것

#### 3단계 간의 사상(Mapping)
> 데이터의 독립성(Data Independency) 구현
> 각 단계 간의 사상을 구현하여, 상하위의 변경이 있다고 하더라도 다른 구조에 영향을 주지 않음

> 외부 / 개념 사상(응용 인터페이스) : 논리적 데이터 독립성을 제공해주는 것
> 개념 / 내부 사상(저장 인터페이스) : 물리적 데이터 독립성을 제공해주는 것
> 내부 / 장치 사상(장치 인터페이스) : 내부 스키마와 물리적인 장치 간의 대응 관계를 정의한 것

> 논리적 데이터 독립성
> 개념 스키마의 변화로부터 외부 스키마가 영향을 받지 않음을 의미
> 물리적 데이터 독립성
> 내부 스키마의 변화가 개념적 스키마에 영향을 미치지 않으며, 따라서 외부 스키마에도 영향을 미치지 않음을 의미

![[스키마사상.png.png]]


![[스키마사상2.png.png]]


![[DB-사용자.png.png]]


## 데이터베이스 API

> API는 데이터베이스에 접근하기 위해 공통적으로 사용되는 라이브러리 함수들의 모임(Application Program Interface)

> ODBC(Open Database Connectivity)
> MS주도 개발, 윈도우 환경
> JDBC(Java Database Connectivity)
> 자바를 위한 드라이버, 모든 플랫폼

## 데이터베이스 시스템 아키텍쳐 유형

> 중앙 집중식 DB System(Centralized)
> DB 시스템이 하나의 컴퓨터 시스템에서 운영됨
> DB 접근과 관련하여 다른 컴퓨터 시스템과 상호작용하지 않음

> 분산 DB 시스템(Distributed)
> 네트워크로 연결된 여러 사이트에 데이터베이스 자체가 분산
> 데이터베이스 시스템도 여러 pc에서 운영됨
> 사용자는 다른 사이트에 저장된 db에도 접근 가능(물리적인 DB는 나눠져있지만, 논리적으로 하나의 DB)

#### 클라이언트-서버 DB 시스템(Client-Server) 
> 현재 대부분의 시스템
> PC | 워크스테이션처럼 자체 컴퓨팅 능력을 가진 Client에 DB 접근
> 서버는 DB를 갖고 DBMS를 운영
> 클라이언트는 Interface / 응용 로직 수행

> 2-tier: 클라이언트 - DB서버(Batch 등)
> 3-tier: 클라이언트 - 응용 서버 - DB서버(WAS)

> DB를 보다 넓은 지역에서 접근하여 성능 향상
> HW비용 절감
> 다양한 컴퓨터 시스템 사용 가능

> 보안이 다소 취약




---

# 데이터 모델

> 데이터 모델: 현실 세계를 표현하는 방법으로서 논리적으로 표현된 구조와 허용될 수 있는 연산 그리고 구조와 연산에서의 제약조건으로 구성
> 관계 데이터 모델: E.F Codd가 제안한 데이터 모델, 릴레이션(테이블)으로 모든 데이터를 논리적으로 표현
> 튜플, 도메인: 릴레이션의 행, 열

